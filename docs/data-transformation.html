<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | USStock Market</title>
  <meta name="description" content="Chapter 3 Data transformation | USStock Market" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | USStock Market" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | USStock Market" />
  
  
  

<meta name="author" content="Weilin Zhou &amp; Xiaoyuan Ge" />


<meta name="date" content="2022-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<script src="libs/d3-5.16.0/d3.min.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SHORT TITLE HERE</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources<span></span></a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#import-data"><i class="fa fa-check"></i><b>3.1</b> Import Data<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#index-pricevolulmereturn"><i class="fa fa-check"></i><b>3.2</b> Index Price/Volulme/Return:<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation.html"><a href="data-transformation.html#rename-column-names"><i class="fa fa-check"></i><b>3.2.1</b> 1) Rename column names<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-transformation.html"><a href="data-transformation.html#merge-into-one-dataset"><i class="fa fa-check"></i><b>3.2.2</b> 2) Merge into one dataset<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-transformation.html"><a href="data-transformation.html#seperate-price-and-volume-data"><i class="fa fa-check"></i><b>3.2.3</b> 3) Seperate Price and Volume Data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#sp500-constituents-financials"><i class="fa fa-check"></i><b>3.3</b> S&amp;P500 Constituents Financials:<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#us-stock"><i class="fa fa-check"></i><b>4.1</b> US Stock<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#sp500-constitutent"><i class="fa fa-check"></i><b>4.2</b> SP500 Constitutent<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#us-whole-stock-market"><i class="fa fa-check"></i><b>5.1</b> US Whole Stock Market<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#sp500-constitutent-1"><i class="fa fa-check"></i><b>5.1.1</b> SP500 Constitutent<span></span></a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#specific-industry-analysis"><i class="fa fa-check"></i><b>5.1.2</b> Specific Industry Analysis<span></span></a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#it-industry-specific-analysis"><i class="fa fa-check"></i><b>5.1.3</b> IT Industry Specific Analysis<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component<span></span></a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">USStock Market</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation<a href="data-transformation.html#data-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="import-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Import Data<a href="data-transformation.html#import-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Index Price/Volulme/Return:</li>
</ol>
<pre><code>##  [1] &quot;S&amp;P500&quot;                 &quot;Energy&quot;                 &quot;Information Tech&quot;      
##  [4] &quot;Financial&quot;              &quot;Health Care&quot;            &quot;Consumer Discretionary&quot;
##  [7] &quot;Utility&quot;                &quot;Consumer Staples&quot;       &quot;Industrials&quot;           
## [10] &quot;Communication Services&quot; &quot;Materials&quot;              &quot;Real Estate&quot;</code></pre>
<p>Pick several datasets to take a brief look at:</p>
<pre><code>## # A tibble: 6 x 4
##   Date                PX_LAST  PX_VOLUME Return
##   &lt;dttm&gt;                &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 2021-12-31 00:00:00   4766. 1871893220  1.09 
## 2 2021-12-24 00:00:00   4726. 2191128627  1.08 
## 3 2021-12-17 00:00:00   4621. 4954862556  1.03 
## 4 2021-12-10 00:00:00   4712. 3004269454  1.07 
## 5 2021-12-03 00:00:00   4538. 4438623886  0.993
## 6 2021-11-26 00:00:00   4595. 2248016670  1.02</code></pre>
<pre><code>## # A tibble: 6 x 4
##   Date                PX_LAST PX_VOLUME Return
##   &lt;dttm&gt;                &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1 2021-12-31 00:00:00    423. 132261808 -0.242
## 2 2021-12-24 00:00:00    418. 165853949 -0.250
## 3 2021-12-17 00:00:00    409. 359172942 -0.267
## 4 2021-12-10 00:00:00    431. 200986137 -0.228
## 5 2021-12-03 00:00:00    415. 374232677 -0.255
## 6 2021-11-26 00:00:00    419. 174021789 -0.249</code></pre>
<pre><code>## # A tibble: 6 x 4
##   Date                PX_LAST PX_VOLUME Return
##   &lt;dttm&gt;                &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1 2021-12-31 00:00:00    325.  62073839  0.671
## 2 2021-12-24 00:00:00    313.  66604413  0.612
## 3 2021-12-17 00:00:00    312. 141611161  0.604
## 4 2021-12-10 00:00:00    307.  90394232  0.579
## 5 2021-12-03 00:00:00    299. 144831658  0.536
## 6 2021-11-26 00:00:00    298.  59145694  0.535</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>S&amp;P500 Constituents Financials:</li>
</ol>
<pre><code>## # A tibble: 6 x 25
##   `MARKET REPRESENTATION` `2021` `2020` `2021 CHANGE`   high election...6 `covid low`
##   &lt;chr&gt;                    &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1 Energy                  0.0267 0.0228        0.172  0.0250       0.0201      0.0248
## 2 Materials               0.0256 0.0263       -0.0244 0.0251       0.0272      0.0240
## 3 Industrials             0.0778 0.0840       -0.0734 0.0840       0.0860      0.0784
## 4 Consumer Discretionary  0.125  0.127        -0.0140 0.123        0.115       0.102 
## 5 Consumer Staples        0.0588 0.0651       -0.0976 0.0582       0.0702      0.0805
## 6 Health Care             0.133  0.135        -0.0132 0.133        0.141       0.150 
## # ... with 18 more variables: pre-covid hi &lt;dbl&gt;, election...9 &lt;dbl&gt;,
## #   bear low &lt;dbl&gt;, bull high &lt;dbl&gt;, prior bear low &lt;dbl&gt;,
## #   prior bull high &lt;dbl&gt;, 2019 &lt;dbl&gt;, 2018 &lt;dbl&gt;, 2017 &lt;dbl&gt;, 2016 &lt;dbl&gt;,
## #   2015 &lt;dbl&gt;, 2014 &lt;dbl&gt;, 2013 &lt;dbl&gt;, 2012 &lt;dbl&gt;, 2011 &lt;dbl&gt;, 2009 &lt;dbl&gt;,
## #   1999 &lt;dbl&gt;, 1989 &lt;dbl&gt;</code></pre>
<pre><code>##  [1] &quot;MARKET REPRESENTATION&quot; &quot;2021&quot;                  &quot;2020&quot;                 
##  [4] &quot;2021 CHANGE&quot;           &quot;high&quot;                  &quot;election...6&quot;         
##  [7] &quot;covid low&quot;             &quot;pre-covid hi&quot;          &quot;election...9&quot;         
## [10] &quot;bear low&quot;              &quot;bull high&quot;             &quot;prior bear low&quot;       
## [13] &quot;prior bull high&quot;       &quot;2019&quot;                  &quot;2018&quot;                 
## [16] &quot;2017&quot;                  &quot;2016&quot;                  &quot;2015&quot;                 
## [19] &quot;2014&quot;                  &quot;2013&quot;                  &quot;2012&quot;                 
## [22] &quot;2011&quot;                  &quot;2009&quot;                  &quot;1999&quot;                 
## [25] &quot;1989&quot;</code></pre>
</div>
<div id="index-pricevolulmereturn" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Index Price/Volulme/Return:<a href="data-transformation.html#index-pricevolulmereturn" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rename-column-names" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> 1) Rename column names<a href="data-transformation.html#rename-column-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rename colnames to help distinguish</p>
</div>
<div id="merge-into-one-dataset" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> 2) Merge into one dataset<a href="data-transformation.html#merge-into-one-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="seperate-price-and-volume-data" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> 3) Seperate Price and Volume Data<a href="data-transformation.html#seperate-price-and-volume-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="sp500-constituents-financials" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> S&amp;P500 Constituents Financials:<a href="data-transformation.html#sp500-constituents-financials" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>##   Symbol                Name                 Sector  Price Price.Earnings
## 1    MMM          3M Company            Industrials 222.89          24.31
## 2    AOS     A.O. Smith Corp            Industrials  60.24          27.76
## 3    ABT Abbott Laboratories            Health Care  56.27          22.51
## 4   ABBV         AbbVie Inc.            Health Care 108.48          19.41
## 5    ACN       Accenture plc Information Technology 150.51          25.47
## 6   ATVI Activision Blizzard Information Technology  65.83          31.80
##   Dividend.Yield Earnings.Share X52.Week.Low X52.Week.High   Market.Cap
## 1      2.3328617           7.92      259.770       175.490 138721055226
## 2      1.1479592           1.70       68.390        48.925  10783419933
## 3      1.9089824           0.26       64.600        42.280 102121042306
## 4      2.4995599           3.29      125.860        60.050 181386347059
## 5      1.7144699           5.44      162.600       114.820  98765855553
## 6      0.4319032           1.28       74.945        38.930  52518668144
##        EBITDA Price.Sales Price.Book
## 1  9048000000    4.390271      11.34
## 2   601000000    3.575483       6.35
## 3  5744000000    3.740480       3.19
## 4 10310000000    6.291571      26.14
## 5  5643228000    2.604117      10.62
## 6  2704000000   10.595120       5.16
##                                                          SEC.Filings
## 1  http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=MMM
## 2  http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=AOS
## 3  http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=ABT
## 4 http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=ABBV
## 5  http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=ACN
## 6 http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=ATVI</code></pre>
<pre><code>## # A tibble: 6 x 25
##   `MARKET REPRESENTATION` `2021` `2020` `2021 CHANGE`   high election...6 `covid low`
##   &lt;chr&gt;                    &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1 Energy                  0.0267 0.0228        0.172  0.0250       0.0201      0.0248
## 2 Materials               0.0256 0.0263       -0.0244 0.0251       0.0272      0.0240
## 3 Industrials             0.0778 0.0840       -0.0734 0.0840       0.0860      0.0784
## 4 Consumer Discretionary  0.125  0.127        -0.0140 0.123        0.115       0.102 
## 5 Consumer Staples        0.0588 0.0651       -0.0976 0.0582       0.0702      0.0805
## 6 Health Care             0.133  0.135        -0.0132 0.133        0.141       0.150 
## # ... with 18 more variables: pre-covid hi &lt;dbl&gt;, election...9 &lt;dbl&gt;,
## #   bear low &lt;dbl&gt;, bull high &lt;dbl&gt;, prior bear low &lt;dbl&gt;,
## #   prior bull high &lt;dbl&gt;, 2019 &lt;dbl&gt;, 2018 &lt;dbl&gt;, 2017 &lt;dbl&gt;, 2016 &lt;dbl&gt;,
## #   2015 &lt;dbl&gt;, 2014 &lt;dbl&gt;, 2013 &lt;dbl&gt;, 2012 &lt;dbl&gt;, 2011 &lt;dbl&gt;, 2009 &lt;dbl&gt;,
## #   1999 &lt;dbl&gt;, 1989 &lt;dbl&gt;</code></pre>
<p>Rename column</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/YOUR GITHUB USERNAME/YOUR REPO NAME/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/YOUR GITHUB USERNAME/YOUR REPO NAME/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
